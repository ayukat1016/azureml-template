# azureml-template
本リポジトリはAzure Machine Learningの環境構築のテンプレートになります。テンプレートはAzure MLワークスペースで機械学習パイプラインを実行し、ダイヤモンド価格の予測モデルの前処理→学習→予測→評価を実行します。


## テンプレートの前提
- 技術提供者が技術利用者にML技術の実行環境を提供する。
- 提供者と利用者は異なるサブスクリプションでもデプロイ可能とする。（同じサブスクリプションでも可）
- [provider](./provider/README.md)は提供者のサブスクリプションでの操作を想定
- [consumer](./consumer/README.md)は利用者のサブスクリプションでの操作を想定
- ML技術は[machine_learning](./provider/machine_learning)で管理し、提供したいML技術をAzure MLレジストリに登録する。
- Azure MLワークスペースはAzure MLレジストリを参照し、利用者に登録済みのML技術を提供する。
- Azure MLワークスペースはテンプレートスペックを実行して自動デプロイする。（azコマンドによる手動デプロイも可）
- テンプレートスペックは権限管理され、権限付与された利用者のみ実行可能。


## シナリオ
- provider
    - 提供者のサブスクリプション `f9928460-8ada-4f70-983d-a98b5653e039` を使用
    - 既存のリソースグループ `dev-ml-template-rg101` に新規レジストリ `dev-ml-template-registry101` を登録
    - 作成したレジストリに環境とコンポーネントを登録
    - ストレージアカウント`devmlst101`およびコンテナ`devmlstc101`を登録し、データおよびジョブ定義ファイルを格納
- consumer
    - 利用者のサブスクリプション `153a38d1-2342-4e80-a56a-c0b0ae9c7c50` を使用
    - 新規のリソースグループ `dev-ml-template-rg201` を作成して、ワークスペース `dev-ml-template-ws201` を作成
    - テンプレートのジョブで使用するデータセットをデータ資産に登録
    - テンプレートのジョブを登録